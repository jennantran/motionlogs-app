(this["webpackJsonpmotionlogs-app"]=this["webpackJsonpmotionlogs-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),s=a.n(o),l=a(10),c=r.a.createContext({logs:[],addLogs:function(){},deleteLog:function(){},user_id:"",error:null}),u=a(20),i=a(1),m=a(2),d=a(4),h=a(3),p=a(5),g="https://sheltered-fortress-79630.herokuapp.com/api",v="logs-client-auth-token",f={saveAuthToken:function(e){window.localStorage.setItem(v,e)},getAuthToken:function(){return window.localStorage.getItem(v)},clearAuthToken:function(){window.localStorage.removeItem(v)},hasAuthToken:function(){return!!f.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))}},E=f,b=(a(26),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleLogoutClick=function(){E.clearAuthToken(),n.setState({authToken:void 0}),n.context.clearLogs()},n.state={authToken:void 0},n}return Object(m.a)(a,[{key:"renderLogoutLink",value:function(){return r.a.createElement("li",{className:"loggedIn"},r.a.createElement(l.b,{onClick:this.handleLogoutClick,to:"/login"},"Logout"))}},{key:"renderLoginLink",value:function(){return r.a.createElement("li",{className:"notLogged-in"},r.a.createElement(l.b,{to:"/login"},"Log in"))}},{key:"render",value:function(){return r.a.createElement("section",{className:"nav"},r.a.createElement("div",{className:"appName"},r.a.createElement(l.b,{to:"/"},r.a.createElement("h2",null,"Motion Logs"))),r.a.createElement("div",{className:"navLinks"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/workouts"},"Workouts")),E.hasAuthToken()?r.a.createElement("li",null,r.a.createElement(l.b,{id:"logs",to:"/logs"},"Logs")):null,E.hasAuthToken()?this.renderLogoutLink():this.renderLoginLink())))}}]),a}(n.Component));b.contextType=c;var y=b,w=(a(32),{postLogin:function(e){return fetch("".concat(g,"/auth/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}});a(33);function k(e){return e.message?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}var j=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleRegistrationRedirect=function(){n.props.history.push("/login")},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={username:t.username,password:t.password};n.context.addUser(a),n.handleRegistrationRedirect()},n.handleVerify=function(e){if(n.state.username.value&&n.state.password.value)return alert("Account created successfuly"),n.handleSubmit(e);alert("Invalid username or password")},n.state={username:{value:"",touched:!1},password:{value:"",touched:!1}},n}return Object(m.a)(a,[{key:"updateUsername",value:function(e){this.setState({username:{value:e,touched:!0}})}},{key:"updatePassword",value:function(e){this.setState({password:{value:e,touched:!0}})}},{key:"validateUsername",value:function(){var e=this.state.username.value.trim();return 0===e.length?"username is required":e.length<3?"Username must be at least 3 characters long":void 0}},{key:"validatePassword",value:function(){var e=this.state.password.value.trim();return 0===e.length?"Password is required":e.length<6||e.length>72?"Password must be between 6 and 72 characters long":e.match(/[0-9]/)?void 0:"Password must contain at least one number"}},{key:"render",value:function(){var e=this,t=this.validateUsername(),a=this.validatePassword();return r.a.createElement("section",null,r.a.createElement("form",{className:"signupForm",onSubmit:function(t){return e.handleVerify(t)}},r.a.createElement("h2",{className:"signUp"},"Sign Up"),r.a.createElement("label",{className:"logEmail"},"Email:",r.a.createElement("input",{type:"text",className:"loginInput",name:"user",id:"user",onChange:function(t){return e.updateUsername(t.target.value)}}),this.state.username.touched&&r.a.createElement(k,{message:t})),r.a.createElement("label",{className:"logPw"},"Password:",r.a.createElement("input",{className:"logpw",type:"password",onChange:function(t){return e.updatePassword(t.target.value)}}),this.state.password.touched&&r.a.createElement(k,{message:a})),r.a.createElement("input",{className:"logSubmit",type:"submit",value:"submit"})))}}]),a}(n.Component);j.contextType=c;var N=j,L=(a(34),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){e.props.history.push("/signup")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("section",{className:"homepage"},r.a.createElement("h1",{className:"homeHeader"},"Make your fitness journey EASIER!"),r.a.createElement("p",null,"Track your progress."),r.a.createElement("button",{className:"homeButton",onClick:function(t){return e.handleClick(t)}},"Join now")),r.a.createElement("section",{className:"homepgDetails"},r.a.createElement("div",{className:"details design"},r.a.createElement("h2",null,"Simple."),r.a.createElement("p",null,"Log your reps and weights and add the workout name.")),r.a.createElement("div",{className:"details learn"},r.a.createElement("h2",null,"Track."),r.a.createElement("p",null,"See the amount of calories expended from your workout using the input calculator.")),r.a.createElement("div",{className:"details accountability"},r.a.createElement("h2",null,"Accountability."),r.a.createElement("p",null,"As your numbers go up, motivation will come."))))}}]),a}(n.Component)),S=Object(p.e)(L),O=(a(35),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();try{n.context.handlePostAuthenticate(n.state),n.props.history.push("/logs")}catch(t){throw new Error(t)}},n.state={username:{value:"",touched:!1},password:{value:"",touched:!1}},n}return Object(m.a)(a,[{key:"updateUsername",value:function(e){this.setState({username:{value:e,touched:!0}})}},{key:"updatePassword",value:function(e){this.setState({password:{value:e,touched:!0}})}},{key:"validateUsername",value:function(){var e=this.state.username.value.trim();return 0===e.length?"username is required":e.length<3?"Username must be at least 3 characters long":void 0}},{key:"validatePassword",value:function(){var e=this.state.password.value.trim();return 0===e.length?"Password is required":e.length<6||e.length>72?"Password must be between 6 and 72 characters long":e.match(/[0-9]/)?void 0:"Password must contain at least one number"}},{key:"render",value:function(){var e=this,t=this.validateUsername(),a=this.validatePassword();return r.a.createElement("section",{className:"loginFrom"},r.a.createElement("form",{className:"userForm",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("h2",{className:"log"},"Log in"),r.a.createElement("label",{className:"logEmail"},"Username:",r.a.createElement("input",{type:"text",className:"loginInput",name:"user",id:"user",onChange:function(t){return e.updateUsername(t.target.value)}}),this.state.username.touched&&r.a.createElement(k,{message:t})),r.a.createElement("label",{className:"logPw"},"Password:",r.a.createElement("input",{type:"password",name:"password",id:"password",className:"loginInput",onChange:function(t){return e.updatePassword(t.target.value)}}),this.state.password.touched&&r.a.createElement(k,{message:a})),r.a.createElement("input",{className:"logSubmit",type:"submit",value:"submit"})))}}]),a}(n.Component));O.contextType=c;var T=O,C=(a(36),n.Component,function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),document.getElementById("resultsTitle").style.display="block",document.getElementById("calories").style.display="block";var t=document.getElementById("queryInput").value;t={query:t};return fetch("https://trackapi.nutritionix.com/v2/natural/exercise",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","x-app-id":"d9893fb0","x-app-key":"81e3af2d37c0786edf8fb767699bce1b"}}).then((function(e){return e.json()})).then((function(e){n.setState({results:e.exercises})})).catch((function(e){throw new Error("There was a fetch error")}))},n.state={results:[]},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.state.results.map((function(e){return r.a.createElement("section",null,r.a.createElement("p",null,e.nf_calories))}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"workoutsHeader"},"Calories Burned"),r.a.createElement("form",{className:"searchBox",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",{className:"workoutSearch"},"Enter your workout:"),r.a.createElement("input",{id:"queryInput",placeholder:"ex: run 10 miles..."}),r.a.createElement("input",{className:"logSubmit",type:"submit",value:"calculate"})),r.a.createElement("section",{id:"results"},r.a.createElement("h2",{id:"resultsTitle",style:{display:"none"}},"Results"),t," ",r.a.createElement("p",{id:"calories",style:{display:"none"}},"calories")))}}]),a}(n.Component)),x=(a(37),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={wout_name:{value:"",touched:""},set:{value:"2",touched:""},rep:{value:"5",touched:""},weight:{value:"",touched:""},data_added:{value:"",touched:""}},n}return Object(m.a)(a,[{key:"updateName",value:function(e){this.setState({wout_name:{value:e,touched:!0}})}},{key:"updateSet",value:function(e){this.setState({set:{value:e,touched:!0}})}},{key:"updateWeight",value:function(e){this.setState({weight:{value:e,touched:!0}})}},{key:"updateRep",value:function(e){this.setState({rep:{value:e,touched:!0}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={wout_name:this.state.wout_name.value,set:this.state.set.value,rep:this.state.rep.value,weight:this.state.weight.value,user_id:this.context.user_id,date_added:new Date};fetch("".concat(g,"/logs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){t.context.addLog(e),t.props.history.push("/logs")})).catch((function(e){throw new Error(e.message)}))}},{key:"render",value:function(){var e=this,t=this.state.error;return r.a.createElement("div",{className:"addLog"},r.a.createElement("h2",null,"Log New Entry"),r.a.createElement("form",{className:"addLogForm",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"addError"},t&&r.a.createElement("p",null,t.message)),r.a.createElement("label",null,"Workout Name"),this.state.wout_name.touched,r.a.createElement("div",{className:"newEntry"},r.a.createElement("input",{required:!0,type:"text",name:"name",placeholder:"workout name",onChange:function(t){return e.updateName(t.target.value)}}),r.a.createElement("label",{className:"addLabel"},"Set",r.a.createElement("select",{name:"set",value:this.state.set.value,id:"set",onChange:function(t){return e.updateSet(t.target.value)}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"))),r.a.createElement("label",{className:"addLabel"},"Reps",r.a.createElement("select",{name:"rep",id:"rep",value:this.state.rep.value,onChange:function(t){return e.updateRep(t.target.value)}},">",r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"20"},"20"))),r.a.createElement("label",null,"Weight"),r.a.createElement("input",{required:!0,type:"number",name:"weight",placeholder:"weight lbs",onChange:function(t){return e.updateWeight(t.target.value)}})),r.a.createElement("div",{className:"addLogButton"},r.a.createElement("button",null,"Cancel"),r.a.createElement("button",{type:"submit"},"Save"))))}}]),a}(n.Component));x.contextType=c;var P=x,A=(a(38),a(42)),U=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={logs:e.context.logs},e.handleDelete=function(t){t.preventDefault();var a=e.props.id;fetch("".concat(g,"/logs/").concat(a),{method:"DELETE",headers:{"content-type":"application/json",Authorization:"bearer ".concat(E.getAuthToken())}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject(e)}))})).then((function(){e.context.deleteLog(a)})).catch((function(e){console.error({error:e})}))},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.date;return r.a.createElement("div",{className:"logContainer",id:this.props.id},r.a.createElement("p",null," ",this.props.name,"\xa0"),r.a.createElement("p",null,"Set:\xa0  ",this.props.set,"\xa0"),r.a.createElement("p",null,"Rep:\xa0 ",this.props.rep,"\xa0"),r.a.createElement("p",null,"Wt: \xa0 ",this.props.weight,"\xa0"),r.a.createElement("button",{className:"delete",onClick:this.handleDelete},"Delete"),r.a.createElement("span",{className:"date"},e?Object(A.a)(new Date(e),"dd-MM-yyyy"):""))}}]),a}(n.Component);U.contextType=c;var _=U,I=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={logs:e.context.logs},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.context.logs;return r.a.createElement("section",null,r.a.createElement("ul",{className:"logList"},t.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(_,{id:t.id,name:t.name,set:t.set,rep:t.rep,weight:t.weight,date:t.date_added,onDelete:e.onDelete}))}))))}}]),a}(n.Component);I.contextType=c;var D=I,R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={page:"list",logs:e.context},e.changePage=function(t){e.setState({page:t})},e}return Object(m.a)(a,[{key:"clickAddLog",value:function(e){this.props.history.push("/addLogs")}},{key:"render",value:function(){var e=this,t=this.state.page,a=this.context.logs;this.state.error;return r.a.createElement("section",{className:"logsList"},r.a.createElement("div",{className:"addLogEntry"},r.a.createElement("button",{className:"addLog",onClick:function(t){return e.clickAddLog(t)}},"Add New Log")),r.a.createElement("h2",null,"Log Entries"),r.a.createElement("div",{className:"content"},"add"===t&&r.a.createElement(P,{onAddLog:this.addLog,onClickCancel:function(){return e.changePage("list")}}),"list"===t&&r.a.createElement(D,{logs:a})),this.context.error&&r.a.createElement("p",{className:"error"},this.context.error))}}]),a}(n.Component);R.contextType=c;var q=R,B=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handlePostAuthenticate=function(t){var a=t.username,n=t.password;t.user_id;w.postLogin({username:a.value,password:n.value}).then((function(t){E.saveAuthToken(t.authToken),e.setState({user_id:t.user_id}),fetch("".concat(g,"/logs"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"bearer ".concat(E.getAuthToken()),user_id:t.user_id}}).then((function(e){return e.json()})).then((function(t){if(t.success&&!1===t.success)throw new Error("error in getting logs");e.setState({logs:t}),e.clearError()})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},e.clearError=function(t){e.setState({error:null})},e.addLog=function(t){e.setState({logs:[].concat(Object(u.a)(e.state.logs),[t])},(function(){localStorage.setItem("logs",JSON.stringify(e.state.logs))}))},e.setLog=function(t){e.setState({logs:t,error:null})},e.deleteLog=function(t){e.setState({logs:e.state.logs.filter((function(e){return e.id!=t}))})},e.addUser=function(e){return fetch("".concat(g,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},e.clearLogs=function(){e.setState({logs:[]})},e.state={logs:JSON.parse(localStorage.getItem("logs"))||[],user_id:"",addLog:e.addLog,error:null,log_id:"",addUser:e.addUser},window.performance&&(performance.navigation?alert("The page is reloading. Log back in to access logs"):alert("This page is not reloaded")),e}return Object(m.a)(a,[{key:"testfunction",value:function(){this.props.history.push("/addLogs")}},{key:"onUnload",value:function(e){this.testfunction()}},{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e={logs:this.state.logs,addLog:this.addLog,deleteLog:this.deleteLog,user_id:this.state.user_id,log_id:this.state.log_id,addUser:this.addUser,handlePostAuthenticate:this.handlePostAuthenticate,clearLogs:this.clearLogs,error:this.state.error};return r.a.createElement("div",{className:"app"},r.a.createElement(c.Provider,{value:e},r.a.createElement("nav",null,r.a.createElement(y,null)),r.a.createElement("main",{className:"App"},r.a.createElement(p.a,{exact:!0,path:"/",component:S}),r.a.createElement(p.a,{path:"/login",component:T}),r.a.createElement(p.a,{path:"/workouts",component:C}),r.a.createElement(p.a,{path:"/addlogs",component:P}),r.a.createElement(p.a,{path:"/logs",component:q}),r.a.createElement(p.a,{path:"/signup",component:N}))))}}]),a}(n.Component);a(39);s.a.render(r.a.createElement(l.a,null,r.a.createElement(c.Provider,null,r.a.createElement(B,null))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.be3e72c5.chunk.js.map